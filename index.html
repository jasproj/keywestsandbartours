<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />

<title>DD -- Dude Diligence | AI Verify Buyers & Sellers</title>

<!-- Favicon -->
<link rel="icon" type="image/x-icon" href="favicon.ico" />
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />

<!-- Social Preview Metadata -->
<meta property="og:title" content="DD -- Dude Diligence" />
<meta property="og:description" content="Instant due diligence reports for commodities brokers. AI Verify Buyers and Sellers before you waste another call." />
<meta property="og:image" content="https://dudediligence.pro/og-image.jpg" />
<meta property="og:url" content="https://dudediligence.pro" />
<meta name="twitter:card" content="summary_large_image" />

<meta name="description" content="Instant due diligence reports for commodities brokers. AI Verify Buyers and Sellers before you waste another call." />

<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

<style>
body {
background: radial-gradient(circle at top, #0f172a 0%, #020617 60%, #000 100%);
}

/* Animated scanning effect for bot eye */
@keyframes scan {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 1; }
}

.bot-eye-glow {
  animation: scan 2s ease-in-out infinite;
}
</style>
</head>

<body class="min-h-screen text-slate-100 antialiased">
<div class="min-h-screen flex flex-col">

<!-- HEADER -->
<header class="border-b border-slate-800/80 bg-black/60 backdrop-blur">
<div class="mx-auto max-w-6xl px-4 py-4 flex items-center justify-between">
<div class="flex items-center gap-2">

<!-- DD LOGO -->
<div class="h-9 w-9 rounded-xl bg-cyan-500/20 border border-cyan-400/40 flex items-center justify-center">
<span class="text-cyan-300 font-semibold text-lg">DD</span>
</div>

<div>
<div class="flex items-center gap-2">
<span class="font-semibold text-slate-50 tracking-tight">Dude Diligence</span>
<span class="text-[10px] uppercase tracking-[0.18em] text-slate-500 border border-slate-700/80 rounded px-1.5 py-[2px]">
AI Verify
</span>
</div>
<p class="text-xs text-slate-400">
Instant due diligence reports for commodities brokers
</p>
</div>
</div>

<!-- Pay in Crypto Button -->
<button onclick="openCryptoModal()" class="flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-orange-500 to-yellow-500 text-slate-900 font-semibold text-sm hover:from-orange-600 hover:to-yellow-600 transition shadow-lg">
<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
<path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 14.813h-2.094v2.094h-2.093v-2.094H9.562v-2.094h3.813V9.188H9.562V7.093h3.813V5h2.093v2.093h2.094v2.094h-2.094v3.532h2.094v2.094z"/>
</svg>
Pay in Crypto
</button>
</div>
</header>

<!-- MAIN -->
<main class="flex-1">
<section class="mx-auto max-w-6xl px-4 py-10 md:py-14">
<div class="grid gap-10 lg:grid-cols-[1.3fr,minmax(0,1fr)] items-start">

<!-- LEFT SIDE -->
<div>
<h1 class="text-3xl md:text-4xl lg:text-5xl font-semibold tracking-tight text-slate-50 mb-4">
AI verify Buyers and Sellers before you waste another call.
</h1>

<p class="mt-4 text-sm md:text-base text-slate-300 max-w-xl">
Upload an LOI, ICPO, KYC pack, mandate letter or other supporting documents. Dude Diligence reads it, checks the company,
email, volume, document patterns, and public risk signals, then gives you a clear risk score and next steps.
</p>

<ul class="mt-6 space-y-2 text-sm text-slate-300">
<li class="flex items-start gap-2">
<span class="mt-1 h-1.5 w-1.5 rounded-full bg-cyan-400"></span>
<span><strong>Instant Risk Scoring:</strong> Get a 0‚Äì100 score with Green / Yellow / Red / Black risk levels in seconds.</span>
</li>
<li class="flex items-start gap-2">
<span class="mt-1 h-1.5 w-1.5 rounded-full bg-cyan-400"></span>
<span><strong>Fraud Detection:</strong> Automatically flags free emails, suspicious domains, unrealistic volumes, 100% upfront payment scams, and recycled LOIs.</span>
</li>
<li class="flex items-start gap-2">
<span class="mt-1 h-1.5 w-1.5 rounded-full bg-cyan-400"></span>
<span><strong>Document Fingerprinting:</strong> SHA-256 hash tracking catches recycled documents and serial scammers using the same LOI across multiple deals.</span>
</li>
<li class="flex items-start gap-2">
<span class="mt-1 h-1.5 w-1.5 rounded-full bg-cyan-400"></span>
<span><strong>Blacklist & Sanctions Screening:</strong> Cross-references buyer/seller names against internal blacklists and OFAC/EU sanctions lists.</span>
</li>
<li class="flex items-start gap-2">
<span class="mt-1 h-1.5 w-1.5 rounded-full bg-cyan-400"></span>
<span><strong>Smart Data Extraction:</strong> AI pulls out buyer, seller, commodity, quantity, price, payment terms, and delivery details automatically.</span>
</li>
<li class="flex items-start gap-2">
<span class="mt-1 h-1.5 w-1.5 rounded-full bg-cyan-400"></span>
<span><strong>Actionable Next Steps:</strong> No guesswork‚Äîget clear recommendations on whether to proceed, request more docs, or walk away.</span>
</li>
<li class="flex items-start gap-2">
<span class="mt-1 h-1.5 w-1.5 rounded-full bg-cyan-400"></span>
<span><strong>Export Reports:</strong> Download full JSON reports for your records, compliance team, or legal review.</span>
</li>
<li class="flex items-start gap-2">
<span class="mt-1 h-1.5 w-1.5 rounded-full bg-cyan-400"></span>
<span>üí∞ <strong>Crypto Payments:</strong> Pay with Bitcoin, Ethereum, USDT, LINK, ICP, TAO, WLFI‚Äîno credit card required.</span>
</li>
</ul>
</div>

<!-- RIGHT SIDE -->
<div class="space-y-4">

<!-- UPLOAD AREA -->
<div class="rounded-2xl border border-slate-800 bg-slate-950/70 backdrop-blur shadow-lg shadow-cyan-500/10">
<div class="px-5 py-4 border-b border-slate-800 flex items-center justify-between">
<div>
<h2 class="text-sm font-semibold text-slate-100">Run Dude Diligence</h2>
<p class="text-xs text-slate-400">Upload LOI, ICPO, or combined PDFs.</p>
</div>
<span class="rounded-full bg-slate-900 px-3 py-1 text-[11px] text-slate-300 border border-slate-700">
1 credit per check
</span>
</div>

<div class="px-5 pt-4 pb-5 space-y-4">

<label class="block">
<span class="text-xs font-medium text-slate-300">Document</span>
<div id="dropzone"
class="mt-2 flex flex-col items-center justify-center rounded-xl border border-dashed border-slate-700 bg-slate-900/60 px-4 py-6 text-center text-xs text-slate-400 cursor-pointer hover:border-cyan-400/70 hover:bg-slate-900 transition">
<span class="mb-2 text-slate-200 font-medium" id="dropzoneText">Click to upload</span>
<span class="text-[11px] text-slate-500">PDF, TXT, max 10 MB.</span>
<input id="fileInput" type="file" accept=".pdf,.txt" class="hidden" />
</div>
</label>

<div class="grid grid-cols-2 gap-3 text-xs">
<div>
<label class="block text-slate-300 mb-1">Commodity</label>
<select id="commodity"
class="w-full rounded-lg border border-slate-700 bg-slate-900/80 px-2.5 py-1.5 text-xs text-slate-100 cursor-pointer">
<option value="">Select commodity...</option>
<option value="ICUMSA 45 Sugar">ICUMSA 45 Sugar</option>
<option value="Soybean Oil">Soybean Oil</option>
<option value="Crude Oil">Crude Oil</option>
<option value="Wheat">Wheat</option>
<option value="Corn">Corn</option>
<option value="Rice">Rice</option>
<option value="Gold">Gold</option>
<option value="Copper">Copper</option>
<option value="Iron Ore">Iron Ore</option>
<option value="Coal">Coal</option>
<option value="Natural Gas">Natural Gas</option>
<option value="Other">Other</option>
</select>
</div>
<div>
<label class="block text-slate-300 mb-1">Volume</label>
<select id="volume"
class="w-full rounded-lg border border-slate-700 bg-slate-900/80 px-2.5 py-1.5 text-xs text-slate-100 cursor-pointer">
<option value="">Select volume range...</option>
<option value="0-1000 MT">0 - 1,000 MT</option>
<option value="1000-10000 MT">1,000 - 10,000 MT</option>
<option value="10000-50000 MT">10,000 - 50,000 MT</option>
<option value="Over 50000 MT">Over 50,000 MT</option>
</select>
</div>
</div>

<button onclick="runDiligence()"
class="w-full mt-2 inline-flex items-center justify-center rounded-xl bg-cyan-500 px-3 py-2 text-xs font-semibold text-slate-900 hover:bg-cyan-400 transition">
Run Dude Diligence
</button>

<p id="statusMessage" class="text-[11px] text-slate-500 h-4"></p>
</div>
</div>

<!-- RESULTS PANEL -->
<div class="rounded-2xl border border-slate-800 bg-slate-950/80 backdrop-blur shadow-lg shadow-cyan-500/5">
<div class="px-5 py-4 border-b border-slate-800 flex items-center justify-between">
<h2 class="text-sm font-semibold text-slate-100">Risk assessment</h2>
<span id="riskBadge"
class="rounded-full border border-slate-700 bg-slate-900 px-3 py-1 text-[11px] text-slate-300">
Waiting...
</span>
</div>

<div class="px-5 py-4 space-y-3 text-xs text-slate-300">
<div class="flex items-baseline gap-2">
<span class="text-[11px] text-slate-500">Score</span>
<span id="score" class="text-lg font-semibold text-slate-50">-- / 100</span>
</div>

<div>
<span class="block text-[11px] text-slate-500 mb-1">Summary</span>
<p id="summary" class="text-xs text-slate-200">Upload a document to begin.</p>
</div>

<div class="grid grid-cols-2 gap-4">
<div>
<span class="block text-[11px] text-slate-500 mb-1">Red flags</span>
<ul id="flagsList" class="space-y-1 text-[11px] text-rose-300">
<li class="text-slate-500">None yet.</li>
</ul>
</div>
<div>
<span class="block text-[11px] text-slate-500 mb-1">Next steps</span>
<ul id="nextStepsList" class="space-y-1 text-[11px] text-emerald-300">
<li class="text-slate-500">None yet.</li>
</ul>
</div>
</div>

<div id="fingerprintSection" class="hidden pt-3 border-t border-slate-800">
<span class="block text-[11px] text-slate-500 mb-2">Document Fingerprint</span>
<div class="bg-slate-900/60 p-2 rounded text-[10px] font-mono text-slate-400">
<p id="fingerprintHash" class="truncate"></p>
<p id="fingerprintStatus" class="mt-1"></p>
</div>
</div>

<button id="exportBtn" onclick="exportReport()" class="hidden w-full mt-3 inline-flex items-center justify-center rounded-lg bg-slate-800 px-3 py-2 text-[11px] font-semibold text-slate-300 hover:bg-slate-700 transition border border-slate-700">
üì• Export JSON Report
</button>

</div>
</div>

</div>
</div>
</section>

<!-- HOW IT WORKS -->
<section class="border-t border-slate-800/80 bg-black/60">
<div class="mx-auto max-w-6xl px-4 py-10 grid md:grid-cols-3 gap-8 text-xs text-slate-300">
<div>
<h3 class="text-sm font-semibold text-slate-100 mb-2">1. Upload the documents</h3>
<p>Upload LOI, ICPO, KYC, or a combined PDF.</p>
</div>
<div>
<h3 class="text-sm font-semibold text-slate-100 mb-2">2. Rules & signals</h3>
<p>We check emails, domains, volumes, patterns, registries, and fingerprints.</p>
</div>
<div>
<h3 class="text-sm font-semibold text-slate-100 mb-2">3. Score & next steps</h3>
<p>You receive a score, flags, and recommended actions.</p>
</div>
</div>
</section>

<!-- PRICING -->
<section class="border-t border-slate-800 bg-slate-950/80">
<div class="mx-auto max-w-6xl px-4 py-10">
<h2 class="text-sm font-semibold text-slate-100 mb-4">Pricing</h2>
<div class="grid md:grid-cols-3 gap-4 text-xs">

<div class="rounded-xl border border-slate-800 bg-slate-900/60 p-4">
<div class="text-slate-200 font-semibold">Basic</div>
<div class="text-lg font-semibold text-slate-50">$49<span class="text-xs text-slate-400">/month</span></div>
<p class="mt-2 text-slate-400">30 checks/month.</p>
<div class="mt-3 flex items-center gap-1 text-[10px] text-slate-500">
<svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 14.813h-2.094v2.094h-2.093v-2.094H9.562v-2.094h3.813V9.188H9.562V7.093h3.813V5h2.093v2.093h2.094v2.094h-2.094v3.532h2.094v2.094z"/></svg>
Crypto accepted
</div>
</div>

<div class="rounded-xl border border-cyan-500/60 bg-cyan-500/5 p-4">
<div class="text-slate-200 font-semibold">Pro</div>
<div class="text-lg font-semibold text-slate-50">$199<span class="text-xs text-slate-400">/month</span></div>
<p class="mt-2 text-slate-400">150 checks/month.</p>
<div class="mt-3 flex items-center gap-1 text-[10px] text-cyan-400">
<svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 14.813h-2.094v2.094h-2.093v-2.094H9.562v-2.094h3.813V9.188H9.562V7.093h3.813V5h2.093v2.093h2.094v2.094h-2.094v3.532h2.094v2.094z"/></svg>
Crypto accepted
</div>
</div>

<div class="rounded-xl border border-slate-800 bg-slate-900/60 p-4">
<div class="text-slate-200 font-semibold">Enterprise</div>
<div class="text-lg font-semibold text-slate-50">$1499<span class="text-xs text-slate-400">/year</span></div>
<p class="mt-2 text-slate-400">Unlimited checks, API access.</p>
<div class="mt-3 flex items-center gap-1 text-[10px] text-slate-500">
<svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 14.813h-2.094v2.094h-2.093v-2.094H9.562v-2.094h3.813V9.188H9.562V7.093h3.813V5h2.093v2.093h2.094v2.094h-2.094v3.532h2.094v2.094z"/></svg>
Crypto accepted
</div>
</div>

</div>
</div>
</section>

</main>
</div>

<!-- UPSELL FLOATING BUTTON -->
<button onclick="openUpsell()"
class="fixed bottom-5 right-5 z-40 px-5 py-3 rounded-full font-semibold text-black bg-yellow-400 hover:bg-yellow-300 shadow-xl shadow-yellow-500/30 text-sm">
Upsell Me
</button>

<!-- CRYPTO PAYMENT MODAL -->
<div id="cryptoModal"
class="fixed inset-0 bg-black/70 backdrop-blur-sm hidden items-center justify-center z-50">
<div class="bg-slate-800 p-8 rounded-2xl w-[94%] max-w-lg shadow-xl border border-slate-700 relative">

<h2 class="text-2xl font-bold text-white mb-4 text-center">
üí∞ Pay with Cryptocurrency
</h2>

<p class="text-slate-300 text-center mb-6 text-sm">
Fast, secure, and private. We accept multiple cryptocurrencies for subscription payments.
</p>

<div class="space-y-3 mb-6">
<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-700 hover:border-orange-500 transition cursor-pointer">
<div class="flex items-center gap-3">
<svg class="w-8 h-8 text-orange-500" fill="currentColor" viewBox="0 0 24 24">
<path d="M23.638 14.904c-1.602 6.43-8.113 10.34-14.542 8.736C2.67 22.05-1.244 15.525.362 9.105 1.962 2.67 8.475-1.243 14.9.358c6.43 1.605 10.342 8.115 8.738 14.548v-.002zm-6.35-4.613c.24-1.59-.974-2.45-2.64-3.03l.54-2.153-1.315-.33-.525 2.107c-.345-.087-.705-.167-1.064-.25l.526-2.127-1.32-.33-.54 2.165c-.285-.067-.565-.132-.84-.2l-1.815-.45-.35 1.407s.975.225.955.236c.535.136.63.486.615.766l-1.477 5.92c-.075.166-.24.406-.614.314.015.02-.96-.24-.96-.24l-.66 1.51 1.71.426.93.242-.54 2.19 1.32.327.54-2.17c.36.1.705.19 1.05.273l-.51 2.154 1.32.33.545-2.19c2.24.427 3.93.257 4.64-1.774.57-1.637-.03-2.58-1.217-3.196.854-.193 1.5-.76 1.68-1.93h.01zm-3.01 4.22c-.404 1.64-3.157.75-4.05.53l.72-2.9c.896.23 3.757.67 3.33 2.37zm.41-4.24c-.37 1.49-2.662.735-3.405.55l.654-2.64c.744.18 3.137.524 2.75 2.084v.006z"/>
</svg>
<div class="flex-1">
<p class="font-semibold text-white">Bitcoin (BTC)</p>
<p class="text-xs text-slate-400">Network: Bitcoin Mainnet</p>
</div>
</div>
</div>

<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-700 hover:border-purple-500 transition cursor-pointer">
<div class="flex items-center gap-3">
<svg class="w-8 h-8 text-purple-500" fill="currentColor" viewBox="0 0 24 24">
<path d="M11.944 17.97L4.58 13.62 11.943 24l7.37-10.38-7.372 4.35h.003zM12.056 0L4.69 12.223l7.365 4.354 7.365-4.35L12.056 0z"/>
</svg>
<div class="flex-1">
<p class="font-semibold text-white">Ethereum (ETH)</p>
<p class="text-xs text-slate-400">Network: Ethereum Mainnet</p>
</div>
</div>
</div>

<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-700 hover:border-green-500 transition cursor-pointer">
<div class="flex items-center gap-3">
<svg class="w-8 h-8 text-green-500" fill="currentColor" viewBox="0 0 24 24">
<circle cx="12" cy="12" r="12" fill="#26A17B"/>
<path d="M16.2 9.8c-.1-.6-.6-1-1.2-1H9c-.6 0-1 .4-1 1v4.4c0 .6.4 1 1 1h6c.6 0 1-.4 1-1v-4.4zm-1 4h-6v-4h6v4z" fill="white"/>
</svg>
<div class="flex-1">
<p class="font-semibold text-white">USDT (Tether)</p>
<p class="text-xs text-slate-400">Network: ERC-20, TRC-20</p>
</div>
</div>
</div>

<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-700 hover:border-blue-500 transition cursor-pointer">
<div class="flex items-center gap-3">
<svg class="w-8 h-8 text-blue-500" fill="currentColor" viewBox="0 0 24 24">
<circle cx="12" cy="12" r="12" fill="#2775CA"/>
<path d="M12 4C7.6 4 4 7.6 4 12s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 13c-2.8 0-5-2.2-5-5s2.2-5 5-5 5 2.2 5 5-2.2 5-5 5z" fill="white"/>
<circle cx="12" cy="12" r="3" fill="white"/>
</svg>
<div class="flex-1">
<p class="font-semibold text-white">USDC (USD Coin)</p>
<p class="text-xs text-slate-400">Network: Multiple chains</p>
</div>
</div>
</div>

<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-700 hover:border-cyan-500 transition cursor-pointer">
<div class="flex items-center gap-3">
<svg class="w-8 h-8 text-cyan-500" fill="currentColor" viewBox="0 0 24 24">
<circle cx="12" cy="12" r="10" fill="#375BD2"/>
<path d="M12 6l-1.5 4.5H6l3.75 2.7L8.25 18 12 15.3l3.75 2.7-1.5-4.8L18 10.5h-4.5L12 6z" fill="white"/>
</svg>
<div class="flex-1">
<p class="font-semibold text-white">Chainlink (LINK)</p>
<p class="text-xs text-slate-400">Network: Ethereum, Multiple chains</p>
</div>
</div>
</div>

<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-700 hover:border-pink-500 transition cursor-pointer">
<div class="flex items-center gap-3">
<svg class="w-8 h-8 text-pink-500" fill="currentColor" viewBox="0 0 24 24">
<circle cx="12" cy="12" r="11" fill="#ED1E79"/>
<path d="M7 12h10M12 7v10" stroke="white" stroke-width="2" stroke-linecap="round"/>
</svg>
<div class="flex-1">
<p class="font-semibold text-white">Internet Computer (ICP)</p>
<p class="text-xs text-slate-400">Network: Internet Computer</p>
</div>
</div>
</div>

<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-700 hover:border-red-500 transition cursor-pointer">
<div class="flex items-center gap-3">
<svg class="w-8 h-8 text-red-500" fill="currentColor" viewBox="0 0 24 24">
<circle cx="12" cy="12" r="11" fill="#DC2626"/>
<path d="M8 9l4 3 4-3M8 15l4-3 4 3" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
<div class="flex-1">
<p class="font-semibold text-white">Bittensor (TAO)</p>
<p class="text-xs text-slate-400">Network: Bittensor</p>
</div>
</div>
</div>

<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-700 hover:border-amber-500 transition cursor-pointer">
<div class="flex items-center gap-3">
<svg class="w-8 h-8 text-amber-500" fill="currentColor" viewBox="0 0 24 24">
<circle cx="12" cy="12" r="11" fill="#F59E0B"/>
<path d="M12 6v12M6 12h12" stroke="white" stroke-width="2.5" stroke-linecap="round"/>
<circle cx="12" cy="12" r="3" fill="white"/>
</svg>
<div class="flex-1">
<p class="font-semibold text-white">World Liberty Financial (WLFI)</p>
<p class="text-xs text-slate-400">Network: Ethereum</p>
</div>
</div>
</div>
</div>

<div class="bg-cyan-500/10 border border-cyan-500/30 rounded-lg p-4 mb-6">
<p class="text-xs text-cyan-300 text-center">
üí° <strong>How it works:</strong> Select your cryptocurrency, complete payment, and receive instant access to your subscription. No credit card required.
</p>
</div>

<div class="flex flex-col sm:flex-row items-center justify-center gap-4">
<button onclick="alert('Crypto payment integration would connect to payment processor here')" class="px-6 py-3 rounded-xl font-semibold text-black bg-gradient-to-r from-orange-400 to-yellow-400 hover:from-orange-500 hover:to-yellow-500 transition text-sm">
Continue with Crypto
</button>
<button onclick="closeCryptoModal()" class="text-sm text-slate-400 hover:text-slate-200 underline">
Cancel
</button>
</div>

<button onclick="closeCryptoModal()" class="absolute top-3 right-4 text-slate-400 text-2xl hover:text-white">
&times;
</button>

</div>
</div>

<!-- UPSELL MODAL -->
<div id="upsellModal"
class="fixed inset-0 bg-black/70 backdrop-blur-sm hidden items-center justify-center z-50">
<div class="bg-slate-800 p-8 rounded-2xl w-[94%] max-w-lg shadow-xl border border-slate-700 relative">

<h2 class="text-2xl font-bold text-white mb-4 text-center">
Unlock Full Dude Diligence Access
</h2>

<p class="text-slate-300 text-center mb-6 text-sm">
Unlimited verifications, blacklist checks, passport validation, fraud scanning, and more.
</p>

<ul class="text-slate-200 space-y-2 mb-6 text-sm">
<li>‚Ä¢ Unlimited LOI / ICPO analysis</li>
<li>‚Ä¢ Corporate registry & blacklist scanning</li>
<li>‚Ä¢ Bank SWIFT verification</li>
<li>‚Ä¢ Passport authenticity checks</li>
<li>‚Ä¢ Buyer capacity estimation</li>
<li>‚Ä¢ Scam-pattern detection</li>
</ul>

<div class="text-center mb-6">
<span class="text-3xl font-bold text-yellow-400">$49/mo</span>
<p class="text-xs text-slate-400 mt-2">üí∞ Pay with crypto or card</p>
</div>

<div class="flex flex-col sm:flex-row items-center justify-center gap-4">
<button onclick="handleStripePayment()" class="px-6 py-3 rounded-xl font-semibold text-white bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 transition text-sm shadow-lg">
üí≥ Pay with Card (Stripe)
</button>
<button onclick="openCryptoModal(); closeUpsell();" class="px-6 py-3 rounded-xl font-semibold text-slate-900 bg-gradient-to-r from-orange-400 to-yellow-400 hover:from-orange-500 hover:to-yellow-500 transition text-sm">
‚Çø Pay with Crypto
</button>
</div>

<button onclick="closeUpsell()" class="absolute top-3 right-4 text-slate-400 text-2xl hover:text-white">
&times;
</button>

</div>
</div>

<!-- SCRIPT -->
<script>
// Global state
let currentFile = null;
let currentHash = null;
let currentResult = null;
let documentFingerprints = [];

// Simulated databases
const BLACKLIST_DB = [
    { company: "fake trading llc", reason: "Known scammer", severity: "BLACK" },
    { company: "ghost commodities", reason: "Document fraud", severity: "RED" },
    { email: "scammer@fakemail.com", reason: "Multiple fraud cases", severity: "BLACK" }
];

const SANCTIONS_LIST = [
    { name: "sanctioned entity inc", list: "OFAC", country: "XX" },
    { name: "blocked trading co", list: "EU Sanctions", country: "YY" }
];

// File upload handling
const fileInput = document.getElementById('fileInput');

fileInput.addEventListener('change', (e) => {
    const file = e.target.files[0];
    if (file) {
        currentFile = file;
        document.getElementById('dropzoneText').textContent = `‚úì ${file.name}`;
        document.getElementById('statusMessage').textContent = 'File ready. Click "Run Dude Diligence" to analyze.';
    }
});

// Calculate SHA-256 fingerprint
async function calculateFingerprint(file) {
    return new Promise((resolve) => {
        const reader = new FileReader();
        reader.onload = (e) => {
            const wordArray = CryptoJS.lib.WordArray.create(e.target.result);
            const hash = CryptoJS.SHA256(wordArray).toString();
            resolve(hash);
        };
        reader.readAsArrayBuffer(file);
    });
}

// Check for document reuse
function checkDocumentReuse(hash) {
    const existing = documentFingerprints.find(fp => fp.hash === hash);
    if (existing) {
        return {
            isReused: true,
            previousUse: existing.uploadDate,
            timesUsed: existing.count
        };
    }
    return { isReused: false };
}

// Rule-based scoring engine
function calculateRuleBasedScore(data) {
    let score = 100;
    const redFlags = [];
    const positiveSignals = [];

    // KYC Document Scoring (different rules)
    if (data.documentType === "KYC") {
        // KYC-specific checks
        if (!data.buyer?.name || data.buyer.name === "Not specified") {
            score -= 20;
            redFlags.push("Company name missing from KYC");
        } else {
            positiveSignals.push("Company identified: " + data.buyer.name);
        }

        if (!data.buyer?.representative || data.buyer.representative === "Not specified") {
            score -= 15;
            redFlags.push("Representative name missing");
        } else {
            positiveSignals.push("Representative identified");
        }

        if (!data.buyer?.country || data.buyer.country === "Not specified") {
            score -= 10;
            redFlags.push("Country not specified");
        } else {
            positiveSignals.push("Country: " + data.buyer.country);
        }

        if (data.paymentTerms === "Not specified") {
            score -= 15;
            redFlags.push("Bank information missing");
        } else {
            positiveSignals.push("Banking details provided");
        }

        if (data.deliveryTerms === "Not specified") {
            score -= 10;
            redFlags.push("Source of funds not declared");
        } else {
            positiveSignals.push("Source of funds declared");
        }

        // For KYC, we don't penalize missing commodity/price/quantity
        // Those aren't expected in KYC documents
        
    } else {
        // LOI/ICPO Document Scoring (original rules)
        
        // Company Reality Checks
        if (!data.buyer?.name || data.buyer.name === "Not specified") {
            score -= 15;
            redFlags.push("Buyer company name missing");
        } else {
            positiveSignals.push("Buyer company name provided");
        }

        if (!data.seller?.name || data.seller.name === "Not specified") {
            score -= 15;
            redFlags.push("Seller company name missing");
        } else {
            positiveSignals.push("Seller company name provided");
        }

        // Deal Reality Checks (only for LOI/ICPO)
        if (!data.quantity || data.quantity === "Not specified") {
            score -= 10;
            redFlags.push("Quantity not specified");
        } else {
            positiveSignals.push("Quantity specified");
        }

        if (!data.price || data.price === "Not specified") {
            score -= 10;
            redFlags.push("Price not specified");
        } else {
            positiveSignals.push("Price specified");
        }

        if (!data.paymentTerms || data.paymentTerms === "Not specified") {
            score -= 8;
            redFlags.push("Payment terms missing");
        } else {
            const paymentLower = data.paymentTerms.toLowerCase();
            if (paymentLower.includes('upfront') || paymentLower.includes('advance') || paymentLower.includes('100%')) {
                score -= 15;
                redFlags.push("‚ö†Ô∏è 100% upfront payment - HIGH FRAUD RISK");
            } else {
                positiveSignals.push("Payment terms specified");
            }
        }

        // Document Integrity Checks
        if (!data.deliveryTerms || data.deliveryTerms === "Not specified") {
            score -= 7;
            redFlags.push("Delivery terms missing");
        }

        if (!data.port || data.port === "Not specified") {
            score -= 7;
            redFlags.push("Port not specified");
        }
    }

    // Email/Identity Checks (applies to both KYC and LOI)
    const freeEmailDomains = ['gmail.com', 'yahoo.com', 'hotmail.com', 'outlook.com', 'aol.com'];
    
    if (data.buyer?.email && data.buyer.email !== "Not specified") {
        const buyerDomain = data.buyer.email.split('@')[1]?.toLowerCase();
        if (freeEmailDomains.includes(buyerDomain)) {
            score -= 12;
            redFlags.push("Buyer using free email domain");
        } else {
            positiveSignals.push("Buyer using corporate email");
        }
    } else {
        score -= 8;
        redFlags.push("Buyer email not provided");
    }

    if (data.seller?.email && data.seller.email !== "Not specified") {
        const sellerDomain = data.seller.email.split('@')[1]?.toLowerCase();
        if (freeEmailDomains.includes(sellerDomain)) {
            score -= 12;
            redFlags.push("Seller using free email domain");
        } else {
            positiveSignals.push("Seller using corporate email");
        }
    } else if (data.documentType !== "KYC") {
        // Only penalize missing seller email for LOI/ICPO, not KYC
        score -= 8;
        redFlags.push("Seller email not provided");
    }

    return {
        score: Math.max(0, score),
        redFlags,
        positiveSignals
    };
}

// Check blacklist
function checkBlacklist(data) {
    const hits = [];
    const buyerName = (data.buyer?.name || '').toLowerCase();
    const sellerName = (data.seller?.name || '').toLowerCase();
    const buyerEmail = (data.buyer?.email || '').toLowerCase();
    const sellerEmail = (data.seller?.email || '').toLowerCase();

    BLACKLIST_DB.forEach(entry => {
        if (entry.company && (buyerName.includes(entry.company) || sellerName.includes(entry.company))) {
            hits.push({ type: 'company', match: entry.company, reason: entry.reason, severity: entry.severity });
        }
        if (entry.email && (buyerEmail === entry.email || sellerEmail === entry.email)) {
            hits.push({ type: 'email', match: entry.email, reason: entry.reason, severity: entry.severity });
        }
    });

    return hits;
}

// Check sanctions
function checkSanctions(data) {
    const hits = [];
    const buyerName = (data.buyer?.name || '').toLowerCase();
    const sellerName = (data.seller?.name || '').toLowerCase();

    SANCTIONS_LIST.forEach(entry => {
        if (buyerName.includes(entry.name) || sellerName.includes(entry.name)) {
            hits.push({
                entity: entry.name,
                list: entry.list,
                country: entry.country,
                matchedParty: buyerName.includes(entry.name) ? 'buyer' : 'seller'
            });
        }
    });

    return hits;
}

// Determine risk level
function determineRiskLevel(score, blacklistHits, sanctionsHits, documentReuse) {
    if (blacklistHits.some(h => h.severity === 'BLACK') || sanctionsHits.length > 0) {
        return 'BLACK';
    }
    if (blacklistHits.some(h => h.severity === 'RED')) {
        return 'RED';
    }
    if (documentReuse.isReused && documentReuse.timesUsed > 3) {
        return 'RED';
    }
    if (score >= 80) return 'GREEN';
    if (score >= 60) return 'YELLOW';
    if (score >= 40) return 'RED';
    return 'BLACK';
}

// Main analysis function - PRODUCTION MODE with Claude API Backend
async function runDiligence() {
    if (!currentFile) {
        document.getElementById('statusMessage').textContent = '‚ö†Ô∏è Please upload a document first.';
        return;
    }

    document.getElementById('statusMessage').textContent = 'üîç Analyzing document...';
    document.getElementById('riskBadge').textContent = 'Processing...';

    try {
        // Calculate fingerprint
        currentHash = await calculateFingerprint(currentFile);
        const reuseCheck = checkDocumentReuse(currentHash);

        // Update fingerprint database
        if (!reuseCheck.isReused) {
            documentFingerprints.push({
                hash: currentHash,
                uploadDate: new Date().toISOString(),
                filename: currentFile.name,
                count: 1
            });
        } else {
            documentFingerprints = documentFingerprints.map(fp => 
                fp.hash === currentHash ? { ...fp, count: fp.count + 1 } : fp
            );
        }

        // Convert file to base64
        const fileBase64 = await new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.onload = () => {
                const base64 = reader.result.split(',')[1];
                resolve(base64);
            };
            reader.onerror = reject;
            reader.readAsDataURL(currentFile);
        });

        // Call backend API
        const response = await fetch('https://dude-diligence-backend-22ywh8nw-jasons-projects-080cf235.vercel.app/api/analyze', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                fileData: fileBase64,
                fileName: currentFile.name,
                fileType: currentFile.type
            })
        });

        if (!response.ok) {
            throw new Error(`Backend error: ${response.status}`);
        }

        const result = await response.json();
        
        if (!result.success) {
            throw new Error(result.error || 'Analysis failed');
        }

        const extracted = result.data;

        // Run due diligence analysis
        const scoring = calculateRuleBasedScore(extracted);
        const blacklistHits = checkBlacklist(extracted);
        const sanctionsHits = checkSanctions(extracted);
        const riskLevel = determineRiskLevel(scoring.score, blacklistHits, sanctionsHits, reuseCheck);

        // Generate next steps
        const nextSteps = [];
        if (riskLevel === 'BLACK') {
            nextSteps.push("‚õî DO NOT PROCEED");
            nextSteps.push("Report to compliance");
        } else if (riskLevel === 'RED') {
            nextSteps.push("Require full KYC pack");
            nextSteps.push("Verify company registration");
            nextSteps.push("Request bank reference");
        } else if (riskLevel === 'YELLOW') {
            nextSteps.push("Request business license");
            nextSteps.push("Verify contact info");
            nextSteps.push("Proceed with caution");
        } else {
            nextSteps.push("Standard due diligence");
            nextSteps.push("Verify final docs");
        }

        // Store result
        currentResult = {
            score: scoring.score,
            riskLevel,
            summary: `${riskLevel} risk with ${scoring.score}/100 score. ${blacklistHits.length > 0 ? 'BLACKLIST HITS. ' : ''}${sanctionsHits.length > 0 ? 'SANCTIONS HITS. ' : ''}${reuseCheck.isReused ? 'Document reused. ' : ''}${scoring.redFlags.length} red flags detected.`,
            redFlags: scoring.redFlags,
            positiveSignals: scoring.positiveSignals,
            nextSteps,
            documentFingerprint: {
                hash: currentHash,
                isReused: reuseCheck.isReused,
                previousUse: reuseCheck.previousUse,
                timesUsed: reuseCheck.timesUsed || 1
            },
            blacklistHits,
            sanctionsHits,
            extractedData: extracted,
            timestamp: new Date().toISOString()
        };

        // Update UI
        updateResultsUI(currentResult);
        document.getElementById('statusMessage').textContent = '‚úì Analysis complete.';

    } catch (err) {
        console.error(err);
        document.getElementById('statusMessage').textContent = `‚ùå Error: ${err.message}`;
        document.getElementById('riskBadge').textContent = 'Error';
    }
}

// DEMO MODE: Enhanced text extraction function for KYC and LOI documents
function extractDataFromText(text) {
    const data = {
        documentType: "Unknown",
        commodity: "Not specified",
        quantity: "Not specified",
        price: "Not specified",
        buyer: {
            name: "Not specified",
            country: "Not specified",
            representative: "Not specified",
            email: "Not specified"
        },
        seller: {
            name: "Not specified",
            country: "Not specified",
            representative: "Not specified",
            email: "Not specified"
        },
        paymentTerms: "Not specified",
        deliveryTerms: "Not specified",
        port: "Not specified"
    };

    const textLower = text.toLowerCase();

    // Detect document type
    if (textLower.includes('kyc') || textLower.includes('compliance package') || textLower.includes('affidavit')) {
        data.documentType = "KYC";
    } else if (textLower.includes('letter of intent') || textLower.includes('loi')) {
        data.documentType = "LOI";
    } else if (textLower.includes('icpo') || textLower.includes('purchase order')) {
        data.documentType = "ICPO";
    } else if (textLower.includes('sco') || textLower.includes('soft corporate offer')) {
        data.documentType = "SCO";
    }

    // KYC-specific extraction
    if (data.documentType === "KYC") {
        // Extract company name - multiple patterns
        const companyPatterns = [
            /(?:full name of corporation|company name|corporation)[:\s]+([^\n]+)/i,
            /(?:on behalf of|for and on behalf of)[:\s]+([A-Z\s]+(?:LTD|LTDA|LLC|INC|CORP|LIMITED|AG|GMBH)[A-Z\s.]*)/i,
            /([A-Z\s]+(?:LTD|LTDA|LLC|INC|CORP|LIMITED|AG|GMBH)[A-Z\s.]*)/
        ];
        
        for (const pattern of companyPatterns) {
            const match = text.match(pattern);
            if (match) {
                data.buyer.name = match[1].trim();
                break;
            }
        }

        // Extract representative name
        const namePatterns = [
            /I,\s+([A-Z\s]+),\s+(?:the undersigned|bearing|hereby)/i,
            /Name[:/\s]+([A-Z\s]+)/i,
            /First name[:\s]+(\w+)[\s\S]{0,100}Last name[:\s]+(\w+)/i
        ];
        
        for (const pattern of namePatterns) {
            const match = text.match(pattern);
            if (match) {
                if (pattern.source.includes('First name')) {
                    data.buyer.representative = `${match[1]} ${match[2]}`.trim();
                } else {
                    data.buyer.representative = match[1].trim();
                }
                break;
            }
        }

        // Extract passport number
        const passportMatch = text.match(/Passport\s+(?:Number|No\.?)[:\s]+([A-Z0-9]+)/i);
        if (passportMatch) {
            data.buyer.representative += ` (Passport: ${passportMatch[1]})`;
        }

        // Extract country
        const countryPatterns = [
            /Country[:\s]+([^\n]+)/i,
            /Country of (?:Citizenship|Issuance)[:\s]+([^\n]+)/i
        ];
        
        for (const pattern of countryPatterns) {
            const match = text.match(pattern);
            if (match) {
                data.buyer.country = match[1].trim();
                break;
            }
        }

        // Extract ALL emails (multiple)
        const emailRegex = /[\w.-]+@[\w.-]+\.\w+/g;
        const emails = text.match(emailRegex);
        if (emails && emails.length > 0) {
            // Primary email
            data.buyer.email = emails[0];
            // If there are multiple emails, note them
            if (emails.length > 1) {
                data.buyer.email += ` (${emails.length} emails found)`;
            }
        }

        // Extract bank information
        const bankNameMatch = text.match(/Bank\s+(?:Name|CLIENTS NAME)[:\s]+([^\n]+)/i);
        if (bankNameMatch) {
            data.paymentTerms = `Bank: ${bankNameMatch[1].trim()}`;
        }

        const accountMatch = text.match(/Account\s+(?:Number|No)[:\s]+([^\n]+)/i);
        if (accountMatch) {
            data.paymentTerms += ` | Account: ${accountMatch[1].trim()}`;
        }

        // Extract source of funds
        const fundsMatch = text.match(/Origin of funds[:\s]+([^\n]+)/i);
        if (fundsMatch) {
            data.deliveryTerms = `Source of Funds: ${fundsMatch[1].trim()}`;
        }

        // Extract fund amount if present
        const amountPatterns = [
            /sum of[:\s]+([A-Z\s]+MILLION[^\n]+)/i,
            /\$[‚Ç¨]?[\d,]+(?:\.\d{2})?/g
        ];
        
        for (const pattern of amountPatterns) {
            const match = text.match(pattern);
            if (match) {
                data.quantity = Array.isArray(match) ? match[0] : match[1];
                break;
            }
        }
    } 
    
    // LOI/ICPO extraction (existing logic)
    else {
        // Extract buyer info
        const buyerMatch = text.match(/buyer[:\s]+([^\n]+)/i);
        if (buyerMatch) data.buyer.name = buyerMatch[1].trim();

        // Extract seller info
        const sellerMatch = text.match(/seller[:\s]+([^\n]+)/i);
        if (sellerMatch) data.seller.name = sellerMatch[1].trim();

        // Extract emails
        const emailRegex = /[\w.-]+@[\w.-]+\.\w+/g;
        const emails = text.match(emailRegex);
        if (emails && emails.length > 0) {
            data.buyer.email = emails[0];
            if (emails.length > 1) data.seller.email = emails[1];
        }

        // Extract commodity
        const commodities = ['sugar', 'icumsa', 'soybean', 'oil', 'wheat', 'corn', 'rice', 'gold', 'copper', 'coal', 'crude'];
        for (const commodity of commodities) {
            if (textLower.includes(commodity)) {
                const commodityMatch = text.match(new RegExp(`(${commodity}[^\\n]{0,30})`, 'i'));
                if (commodityMatch) data.commodity = commodityMatch[1].trim();
                break;
            }
        }

        // Extract quantity
        const quantityMatch = text.match(/quantity[:\s]+([^\n]+)/i) || text.match(/(\d+[\s,]*(?:MT|metric ton|tons?))/i);
        if (quantityMatch) data.quantity = quantityMatch[1].trim();

        // Extract price
        const priceMatch = text.match(/price[:\s]+([^\n]+)/i) || text.match(/(\$[\d,]+(?:\.\d{2})?[\s]*(?:per|\/)?[\s]*(?:MT|ton)?)/i);
        if (priceMatch) data.price = priceMatch[1].trim();

        // Extract payment terms
        const paymentMatch = text.match(/payment[:\s]+([^\n]+)/i);
        if (paymentMatch) data.paymentTerms = paymentMatch[1].trim();

        // Extract delivery terms
        const deliveryMatch = text.match(/delivery[:\s]+([^\n]+)/i) || text.match(/(FOB|CIF|CFR|FAS)[^\n]*/i);
        if (deliveryMatch) data.deliveryTerms = deliveryMatch[1].trim();

        // Extract port
        const portMatch = text.match(/port[:\s]+([^\n]+)/i);
        if (portMatch) data.port = portMatch[1].trim();
    }

    return data;
}

// Update results UI
function updateResultsUI(result) {
    // Risk badge
    const riskBadge = document.getElementById('riskBadge');
    riskBadge.textContent = `${result.riskLevel} RISK`;
    
    const riskColors = {
        'GREEN': 'bg-green-500/20 border-green-400 text-green-300',
        'YELLOW': 'bg-yellow-500/20 border-yellow-400 text-yellow-300',
        'RED': 'bg-red-500/20 border-red-400 text-red-300',
        'BLACK': 'bg-gray-900 border-gray-700 text-gray-100'
    };
    
    riskBadge.className = `rounded-full border px-3 py-1 text-[11px] font-semibold ${riskColors[result.riskLevel]}`;

    // Score
    document.getElementById('score').textContent = `${result.score} / 100`;

    // Summary
    document.getElementById('summary').textContent = result.summary;

    // Red flags
    const flagsList = document.getElementById('flagsList');
    if (result.redFlags.length > 0) {
        flagsList.innerHTML = result.redFlags.map(flag => `<li>‚Ä¢ ${flag}</li>`).join('');
    } else {
        flagsList.innerHTML = '<li class="text-slate-500">None detected.</li>';
    }

    // Next steps
    const nextStepsList = document.getElementById('nextStepsList');
    if (result.nextSteps.length > 0) {
        nextStepsList.innerHTML = result.nextSteps.map(step => `<li>‚Ä¢ ${step}</li>`).join('');
    } else {
        nextStepsList.innerHTML = '<li class="text-slate-500">No actions needed.</li>';
    }

    // Fingerprint section
    const fingerprintSection = document.getElementById('fingerprintSection');
    fingerprintSection.classList.remove('hidden');
    
    document.getElementById('fingerprintHash').textContent = `${result.documentFingerprint.hash.substring(0, 32)}...`;
    
    const statusText = result.documentFingerprint.isReused 
        ? `‚ö†Ô∏è Reused (${result.documentFingerprint.timesUsed}x)` 
        : '‚úì New document';
    document.getElementById('fingerprintStatus').textContent = statusText;

    // Show export button
    document.getElementById('exportBtn').classList.remove('hidden');
}

// Export JSON report
function exportReport() {
    if (!currentResult) return;
    
    const blob = new Blob([JSON.stringify(currentResult, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `dd-report-${Date.now()}.json`;
    a.click();
    URL.revokeObjectURL(url);
}

// Modal functions
function openCryptoModal() {
    const m = document.getElementById('cryptoModal');
    m.classList.remove('hidden');
    m.classList.add('flex');
}

function closeCryptoModal() {
    const m = document.getElementById('cryptoModal');
    m.classList.add('hidden');
    m.classList.remove('flex');
}

function openUpsell() {
    const m = document.getElementById('upsellModal');
    m.classList.remove('hidden');
    m.classList.add('flex');
}

function closeUpsell() {
    const m = document.getElementById('upsellModal');
    m.classList.add('hidden');
    m.classList.remove('flex');
}

// Stripe payment handler
function handleStripePayment() {
    // TODO: Replace these with your actual Stripe Payment Links
    const STRIPE_PAYMENT_LINKS = {
        basic: 'https://buy.stripe.com/test_YOUR_BASIC_LINK',
        pro: 'https://buy.stripe.com/test_YOUR_PRO_LINK',
        enterprise: 'https://buy.stripe.com/test_YOUR_ENTERPRISE_LINK'
    };
    
    // For now, redirect to Stripe payment link for Basic plan ($49/mo)
    // You'll replace this URL with your actual Stripe Payment Link
    const stripeLink = STRIPE_PAYMENT_LINKS.basic;
    
    // Show instructions for now
    alert('Stripe Integration Instructions:\n\n1. Go to stripe.com and create an account\n2. Create a Payment Link for $49/month\n3. Replace the URL in the handleStripePayment() function\n4. Test the payment flow\n\nFor now, this is a placeholder. Click OK to see where your Stripe link would go.');
    
    // Uncomment this line when you have your Stripe Payment Link:
    // window.location.href = stripeLink;
}
</script>

</body>
</html>
